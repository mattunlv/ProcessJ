import std.*;


void foo(chan<int>.read in) {

     int x;

     x = in.read();

     println("Received: " + x);

}

void bar(chan<int>[][] channels) {
     int n = 10;
     int s = 5;
     for(int i=0; i<n; i++) {
          par for(int j = 0; j < s; j++) {

               channels[i][j].write(i);
               foo(channels[i][j].read);

          }

     }

}

void main(string args[]) {

     int n = 10;
     int s = 5;
     chan<int>[][] channels = new chan<int>[n][s];

     chan<int>.read[][] read_channels = new chan<int>.read[n][s];

     for(int index = 0; index < n; index++)
          for(int jindex = 0; jindex < s; jindex++)
               read_channels[index][jindex] = channels[index][jindex].read;

     //bar(channels);

}

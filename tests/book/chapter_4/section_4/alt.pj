/**
 * ProcessJ Book Code
 * Chapter 4
 * Section 4
 * Page 108
 */

import std.io;

public void number_stream(chan<int>.write out, int count) {

    for(int number = 0; number < count; number++) {

        out.write(number);

    }

}

public void altProc(chan<int>.read c1, chan<int>.read c2) {

    int v;

    while(true) {
 
        alt {
    
            v = c1.read(): println("Value on c1: " + v);
            v = c2.read(): println("Value on c2: " + v);

        }

    }

}

public void main(string[] args) {

    chan<int> c1, c2;
    
    par {

        number_stream(c1.write, 10);
        number_stream(c2.write, 10);
        altProc(c1.read, c2.read);

    }

}

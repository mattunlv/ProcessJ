import std.*;

record Message {
     
     int index;

}

void foo(chan<int>.read in) {

     int x;

     x = in.read();

     println("Received: " + x);

}

void bar(chan<int>[][] channels) {
     int n = 10;
     int s = 5;
     for(int i=0; i<n; i++) {
          par for(int j = 0; j < s; j++) {

               channels[i][j].write(i);
               foo(channels[i][j].read);

          }

     }

}

public record writingChannel{
    chan<int>.write out;
}

//void foo(writingChannel out){
//    if(out == null){
//        println("Null");
//    }
//    else{
//        println("Not null");
//    }
//    println("Dude");
//}

void baz(Message message) {
     
     message.index = 0;

}

void main(string args[]) {

     int n = 10;
     int s = 5;
     int x = 20;
     chan<int>[][] channels = new chan<int>[n][s];
     chan<int>[][][][] leChannels = new chan<int>[n][s][x][x];

     chan<int>.read[][] read_channels = new chan<int>.read[n][s];

     for(int index = 0; index < n; index++)
          for(int jindex = 0; jindex < s; jindex++)
               read_channels[index][jindex] = channels[index][jindex].read;

     chan<Message>[][] otherChannels = new chan<Message>[n][s];

     writingChannel wc;
     foo(wc);

     //bar(channels);

}
